services:
  # Service Backend API - Configuration simplifiée
  - type: web
    name: linkedin-prospector-api
    env: node
    plan: starter
    region: oregon
    buildCommand: cd backend && npm run render-build
    startCommand: cd backend && npm start
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: DATABASE_URL
        sync: false
      - key: OPENAI_API_KEY
        sync: false
      - key: CLAUDE_API_KEY
        sync: false
      - key: MISTRAL_API_KEY
        sync: false
      - key: UNIPILE_API_KEY
        sync: false
      - key: JWT_SECRET
        generateValue: true
      - key: ENCRYPTION_KEY
        generateValue: true

  # Service Frontend Next.js
  - type: web
    name: linkedin-prospector-frontend
    env: node
    plan: starter
    region: oregon
    buildCommand: cd frontend && npm install && npm run build
    startCommand: cd frontend && npm start
    healthCheckPath: /
    envVars:
      - key: NODE_ENV
        value: production
      - key: NEXT_PUBLIC_API_URL
        value: https://setterai-729q.onrender.com

databases:
  # Base de données PostgreSQL
  - name: linkedin-prospector-db
    databaseName: linkedin_prospector
    user: linkedin_prospector_user
    plan: starter
    region: oregon 